!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("babel-polyfill"),require("babel-runtime/core-js/object/assign"),require("babel-runtime/core-js/object/keys"),require("popsicle"),require("bluebird"),require("xml2js"),require("babel-runtime/core-js/json/stringify"),require("cheerio"),require("traverse")):"function"==typeof define&&define.amd?define("wajs",["babel-polyfill","babel-runtime/core-js/object/assign","babel-runtime/core-js/object/keys","popsicle","bluebird","xml2js","babel-runtime/core-js/json/stringify","cheerio","traverse"],factory):"object"==typeof exports?exports.wajs=factory(require("babel-polyfill"),require("babel-runtime/core-js/object/assign"),require("babel-runtime/core-js/object/keys"),require("popsicle"),require("bluebird"),require("xml2js"),require("babel-runtime/core-js/json/stringify"),require("cheerio"),require("traverse")):root.wajs=factory(root["babel-polyfill"],root["babel-runtime/core-js/object/assign"],root["babel-runtime/core-js/object/keys"],root.popsicle,root.bluebird,root.xml2js,root["babel-runtime/core-js/json/stringify"],root.cheerio,root.traverse)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_7__,__WEBPACK_EXTERNAL_MODULE_8__,__WEBPACK_EXTERNAL_MODULE_9__,__WEBPACK_EXTERNAL_MODULE_10__,__WEBPACK_EXTERNAL_MODULE_12__,__WEBPACK_EXTERNAL_MODULE_14__,__WEBPACK_EXTERNAL_MODULE_15__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){__webpack_require__(1),module.exports=__webpack_require__(2)},function(module,exports){module.exports=require("babel-polyfill")},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(3)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function wajs(appId){if(!appId||!appId.length)throw new Error(constants.noAppIdError);var q={query:{appid:appId}};this.__requestOptions=(0,_assign2["default"])({},constants.defaultQueryOptions,q)}var _assign=__webpack_require__(4),_assign2=_interopRequireDefault(_assign),constants=__webpack_require__(5);wajs.prototype={constructor:wajs,query:__webpack_require__(6)},module.exports=wajs},function(module,exports){module.exports=require("babel-runtime/core-js/object/assign")},function(module,exports){"use strict";var queryMap={podTitle:"podtitle",podIndex:"podindex",includePodId:"includepodid",excludePodId:"excludepodid",coordinates:"latlong",podState:"podstate",maxWidth:"maxwidth",plotWidth:"plotWidth",magnitude:"mag"},defaultQueryOptions={method:"GET",url:"http://api.wolframalpha.com/v2/query",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},setAppIdCmd='export WA_APP_ID="<YOUR KEY HERE>"',setAppIdError="The Wolfram|Alpha API will not work without your APP_ID",noAppIdError=setAppIdError+". Before reinitializing wajs, run "+setAppIdCmd+".";module.exports={queryMap:queryMap,defaultQueryOptions:defaultQueryOptions,noAppIdError:noAppIdError}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function generateQuery(input,options){var q=(0,_assign2["default"])({},this.__requestOptions);return input&&input.length&&(q.query.input=input),(0,_keys2["default"])(options||{}).forEach(function(key){if(options.hasOwnProperty(key)&&options[key]){var qKey=constants.queryMap[key]||key;q.query[qKey]=options[key]}}),q}function processQueryResponse(y,n,res){res.status>=200&&res.status<400&&$parseXML(res.body,function(err,xml){err&&n(err),y(new queryResult(xml,res.body))})}function query(input,queryOptions){return new $promise(function(y,n){var prefix=input||"",opts=queryOptions||{};$net.request(generateQuery.call(this,prefix,opts)).then(processQueryResponse.bind(this,y,n))["catch"](n)}.bind(this))}var _keys=__webpack_require__(7),_keys2=_interopRequireDefault(_keys),_assign=__webpack_require__(4),_assign2=_interopRequireDefault(_assign),$net=__webpack_require__(8),$promise=__webpack_require__(9),$x=__webpack_require__(10),$parseXML=(new $x.Parser).parseString,constants=__webpack_require__(5),queryResult=__webpack_require__(11);module.exports=query},function(module,exports){module.exports=require("babel-runtime/core-js/object/keys")},function(module,exports){module.exports=require("popsicle")},function(module,exports){module.exports=require("bluebird")},function(module,exports){module.exports=require("xml2js")},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function queryResult(xml,rawXml){if(!xml||!xml.queryresult)throw new Error("Invalid query result format");this.__xml=xml,this.__raw=rawXml||"",this.__root=liftAttributes((0,_assign2["default"])({},xml.queryresult)),this.__pods=(this.__root.pod||[]).map(function(_pod){return new pod(_pod,this)}.bind(this))}function liftAttributes(obj){return lift((0,_assign2["default"])({},obj))}function lift(tree){return $walk(tree).forEach(function(){if("$"===this.key){var currentPath=this.path.slice(0,this.path.length-1);this["delete"](),this.keys.forEach(function(key){$walk(tree).set(currentPath.concat(key),this.node[key])}.bind(this))}}),tree}function toJson(){return(0,_stringify2["default"])(this.__root)}function rawXml(){return this.__raw}function succeeded(){return"true"===this.__root.success}function failed(){return"true"===this.__root.error}function numPods(){return Number(this.__root.numpods||0)}function dataTypes(){return(this.__root.datatypes||"").split(",")}function error(){return this.__xml.queryresult.error||null}function pods(xmlFormat){return xmlFormat?getNodes.call(this,"pod"):this.__pods}function assumptions(xmlFormat){return xmlFormat?getNodes.call(this,"assumptions"):(this.__root.assumptions||[]).map(function(_assumption){return new assumption(_assumption.assumption[0],this)}.bind(this))}function sources(xmlFormat){return xmlFormat?getNodes.call(this,"sources"):this.__root.sources}function warnings(xmlFormat){return xmlFormat?getNodes.call(this,"warnings"):this.__root.warnings}function getNodes(key,xml){var __stack=[],__xml=xml?xml:$.load(this.__raw,xmlOptions());return traverse(__stack,__xml.root(),collect.bind(this,key)),__stack.map(function(_node){return $.load(_node,xmlOptions()).xml()})}function xmlOptions(){return{xmlMode:!0}}function traverse(stack,parsedXML,action){var __$root=$(parsedXML),__root=__$root.get(0);action(stack,__root);var children=__$root.children();children.length&&children.each(function(i,el){traverse(stack,el,action)})}function collect(key,stack,__root){__root.tagName===key&&stack.push(__root)}var _stringify=__webpack_require__(12),_stringify2=_interopRequireDefault(_stringify),_assign=__webpack_require__(4),_assign2=_interopRequireDefault(_assign),pod=__webpack_require__(13),$=__webpack_require__(14),$walk=__webpack_require__(15);queryResult.prototype={constructor:queryResult,rawXml:rawXml,toJson:toJson,succeeded:succeeded,failed:failed,numPods:numPods,dataTypes:dataTypes,error:error,pods:pods,assumptions:assumptions,sources:sources,warnings:warnings},module.exports=queryResult},function(module,exports){module.exports=require("babel-runtime/core-js/json/stringify")},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function pod(data,parent){(0,_assign2["default"])(this,data),parent&&(this.__parent=parent),this.__data=data}function failed(){return"true"===this.error}function succeeded(){return!podFailed.call(this)}function numSubPods(){return Number(this.numsubpods||0)}function title(){return this.title||""}function scanner(){return this.scanner||""}function position(){return Number(this.position||0)}function asyncUrl(){return this.asynchurl||""}function subPods(xmlFormat){return xmlFormat?childXml.call(this,"subpod"):(this.subpod||[]).map(function(subpod){return new subPod(subpod)})}function states(xmlFormat){return xmlFormat?childXml.call(this,"states"):this.states||[]}function infos(xmlFormat){return xmlFormat?childXml.call(this,"infos"):this.infos||[]}function childXml(key){var __xml=$.load(this.rawXml.call(this),xmlOptions()),__podXml=$.load(__xml.root().get(0).children[0],xmlOptions()),items=[];return __podXml(key).each(function(i,el){var x=$.load($(el).get(0),xmlOptions()).xml()||"";items.push(x)}),items}function rawXml(){return rootXml.call(this,"pod")}function xmlOptions(){return{xmlMode:!0}}function rootXml(key){var __xml=$.load(this.__parent.rawXml.call(this.__parent),xmlOptions()),__id=this.id,__filtered=__xml(key).filter(function(i,el){return $(el).attr("id")===__id}),items=[];return __filtered.each(function(i,el){var x=$.load($(el).get(0),xmlOptions()).xml()||"";items.push(x)}),items}var _assign=__webpack_require__(4),_assign2=_interopRequireDefault(_assign),$=__webpack_require__(14);pod.prototype={constructor:pod,failed:failed,succeeded:succeeded,numSubPods:numSubPods,getTitle:title,getScanner:scanner,getPosition:position,asyncEndpoint:asyncUrl,subPods:subPods,getStates:states,getInfos:infos,rawXml:rawXml},module.exports=pod},function(module,exports){module.exports=require("cheerio")},function(module,exports){module.exports=require("traverse")}])});
//# sourceMappingURL=wajs.min.js.map